# ============================================================
#  OpenDKIM Configuration
#  Placeholders {{VAR}} are replaced at container startup
# ============================================================

AutoRestart             Yes
AutoRestartRate         10/1h

Syslog                  yes
SyslogSuccess           yes
LogWhy                  yes

# Signing and verification parameters
Canonicalization        relaxed/simple
Mode                    sv
OversignHeaders         From

# Primary domain settings
Domain                  {{MAIL_DOMAIN}}
Selector                default
KeyFile                 /etc/opendkim/keys/{{MAIL_DOMAIN}}/default.private

# Process settings
UserID                  opendkim:opendkim
UMask                   002

# MTA connection socket
Socket                  inet:12301@localhost

PidFile                 /run/opendkim/opendkim.pid
SignatureAlgorithm      rsa-sha256

# Multi-domain support via tables
ExternalIgnoreList      refile:/etc/opendkim/TrustedHosts
InternalHosts           refile:/etc/opendkim/TrustedHosts
KeyTable                refile:/etc/opendkim/KeyTable
SigningTable            refile:/etc/opendkim/SigningTable

# DNSSEC trust anchor
TrustAnchorFile         /usr/share/dns/root.key
